<template>
	<view class="container">
		<view class="play_header">
			<view class="m_name">
				{{musicInfo.name}}
			</view>
			<view class="a_name">
				{{authors[1]}}
			</view>
		</view>
		<view class="play_center">
			<u--image class="music_pic" :src="musicInfo.album_pic" :width="picWidth+'rpx'" :height="picWidth+'rpx'"
				shape="circle">
			</u--image>
			<view class="lyric">

			</view>
		</view>
		<view class="play_footer">
			<view class="Collect">
				<svg t="1689251391615" class="icon" viewBox="0 0 1024 1024" version="1.1"
					xmlns="http://www.w3.org/2000/svg" p-id="4779" width="32" height="32">
					<path
						d="M667.787 117.333c165.077 0 270.88 132.374 270.88 310.528 0 138.251-125.099 290.507-371.574 461.59a96.768 96.768 0 0 1-110.186 0C210.432 718.368 85.333 566.112 85.333 427.86c0-178.154 105.803-310.528 270.88-310.528 59.616 0 100.054 20.832 155.787 68.096 55.744-47.253 96.17-68.096 155.787-68.096z m0 63.147c-41.44 0-70.262 15.19-116.96 55.04-2.166 1.845-14.4 12.373-17.942 15.381a32.32 32.32 0 0 1-41.77 0c-3.542-3.018-15.776-13.536-17.942-15.381-46.698-39.85-75.52-55.04-116.96-55.04-126.026 0-206.88 100.779-206.88 246.219 0 110.901 113.526 248.544 344.299 408.128a32.352 32.352 0 0 0 36.736 0C761.141 675.253 874.667 537.6 874.667 426.699c0-145.44-80.854-246.219-206.88-246.219z"
						p-id="4780" fill="#000000"></path>
				</svg>
				<svg t="1689251270036" class="icon" viewBox="0 0 1024 1024" version="1.1"
					xmlns="http://www.w3.org/2000/svg" p-id="3523" width="32" height="32">
					<path
						d="M512 720.416l232.096 171.904a19.2 19.2 0 0 0 16.864 2.88c9.536-2.88 14.592-12.224 11.84-20.864l-88.96-281.6 237.344-176.96a16.48 16.48 0 0 0 6.816-13.152c0-9.152-7.904-16.928-18.112-16.96l-292-0.448-88.48-277.12a17.568 17.568 0 0 0-11.776-11.264c-9.856-2.976-20.16 2.304-23.04 11.264l-88.48 277.12-292 0.48a18.624 18.624 0 0 0-14.624 6.944 16.096 16.096 0 0 0 3.328 23.136l237.376 176.96-88.992 281.6a15.904 15.904 0 0 0 2.72 14.688c6.048 7.744 17.856 9.312 25.984 3.296L512 720.416z m-194.016 223.36a83.008 83.008 0 0 1-114.56-15.424 79.904 79.904 0 0 1-13.28-73.28l75.296-238.24-200.864-149.76a80.096 80.096 0 0 1-15.424-113.92 82.624 82.624 0 0 1 64.864-31.456l245.312-0.384 74.304-232.672c13.6-42.56 59.52-66.112 102.56-53.024A81.536 81.536 0 0 1 590.4 88.64l74.304 232.64 245.312 0.416c45.184 0.064 82.08 36.16 82.016 81.024a80.48 80.48 0 0 1-32.576 64.352l-200.864 149.76 75.296 238.24c13.568 42.976-11.072 88.352-54.496 101.408a83.2 83.2 0 0 1-73.344-12.736L512 800.064l-194.016 143.68z"
						fill="#000000" p-id="3524"></path>
				</svg>
				<svg t="1689251473218" class="icon" viewBox="0 0 1024 1024" version="1.1"
					xmlns="http://www.w3.org/2000/svg" p-id="6141" width="32" height="32">
					<path
						d="M952.8 668.48a40.16 40.16 0 0 0-39.2 39.2c0 86.24-57.6 156.96-130.88 156.96H241.28C168 864 110.4 793.92 110.4 707.68a40.16 40.16 0 0 0-39.2-39.2A40.16 40.16 0 0 0 32 707.68c0 130.72 94.24 235.36 209.28 235.36h541.44C897.76 943.04 992 838.4 992 707.68a40.16 40.16 0 0 0-39.2-39.2z"
						fill="#000000" p-id="6142"></path>
					<path
						d="M484.48 686.72a45.12 45.12 0 0 0 57.6 0l149.12-149.12a38.88 38.88 0 0 0-54.88-54.88l-81.12 81.12V119.04a39.36 39.36 0 0 0-78.56 0v444.8l-81.12-81.12a38.88 38.88 0 0 0-54.88 54.88z"
						fill="#000000" p-id="6143"></path>
				</svg>
				<svg t="1689254384083" class="icon" viewBox="0 0 1024 1024" version="1.1"
					xmlns="http://www.w3.org/2000/svg" p-id="18544" width="30" height="30">
					<path
						d="M420.966049 32.869982C396.390062 54.885971 384.000069 81.817956 384.000069 113.765939c0 32.051983 12.339993 58.931968 36.96598 80.895956 24.729987 21.913988 55.03997 32.869982 91.033951 32.869983a132.095929 132.095929 0 0 0 90.981951-32.869983c24.371987-21.247989 37.73498-50.533973 36.96698-80.895956 0-31.999983-12.287993-58.879968-36.96698-80.895957C578.303964 10.956994 547.941981 0 512 0c-36.044981 0-66.303964 10.956994-91.033951 32.869982z m0 398.233786C396.390062 453.068757 384.000069 479.999742 384.000069 511.999725s12.339993 58.879968 36.96598 80.895957c24.729987 21.861988 55.03997 32.869982 91.033951 32.869982a132.095929 132.095929 0 0 0 90.981951-32.869982c24.371987-21.299989 37.73498-50.585973 36.96698-80.895957 0-32.050983-12.287993-58.930968-36.96698-80.895957-24.677987-21.913988-55.03997-32.869982-90.981951-32.869982-36.044981 0-66.303964 10.955994-91.033951 32.869982z m0 398.181787C396.390062 851.301543 384.000069 878.233528 384.000069 910.181511c0 32.051983 12.339993 58.931968 36.96598 80.895957 24.729987 21.913988 55.03997 32.869982 91.033951 32.869982a132.095929 132.095929 0 0 0 90.981951-32.869982c24.371987-21.247989 37.73498-50.533973 36.96698-80.895957 0-31.999983-12.287993-58.879968-36.96698-80.895956-24.677987-21.861988-55.03997-32.869982-90.981951-32.869983-36.044981 0-66.303964 11.007994-91.033951 32.869983z"
						p-id="18545" fill="#000000"></path>
				</svg>
			</view>
			<view class="playBox">
				<view class="Progress_bar">

				</view>
				<view class="play_status">
					<svg t="1689251611507" @click="ToggleStatus" v-if="play_status===0" class="icon"
						viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8631" width="32"
						height="32">
						<path
							d="M928 476.8c-19.2 0-32 12.8-32 32v86.4c0 108.8-86.4 198.4-198.4 198.4H201.6l41.6-38.4c6.4-6.4 12.8-16 12.8-25.6 0-19.2-16-35.2-35.2-35.2-9.6 0-22.4 3.2-28.8 9.6l-108.8 99.2c-16 12.8-12.8 35.2 0 48l108.8 96c6.4 6.4 19.2 12.8 28.8 12.8 19.2 0 35.2-12.8 38.4-32 0-12.8-6.4-22.4-16-28.8l-48-44.8h499.2c147.2 0 265.6-118.4 265.6-259.2v-86.4c0-19.2-12.8-32-32-32zM96 556.8c19.2 0 32-12.8 32-32v-89.6c0-112 89.6-201.6 198.4-204.8h496l-41.6 38.4c-6.4 6.4-12.8 16-12.8 25.6 0 19.2 16 35.2 35.2 35.2 9.6 0 22.4-3.2 28.8-9.6l105.6-99.2c16-12.8 12.8-35.2 0-48l-108.8-96c-6.4-6.4-19.2-12.8-28.8-12.8-19.2 0-35.2 12.8-38.4 32 0 12.8 6.4 22.4 16 28.8l48 44.8H329.6C182.4 169.6 64 288 64 438.4v86.4c0 19.2 12.8 32 32 32z"
							p-id="8632" fill="#000000"></path>
						<path d="M544 672V352h-48L416 409.6l16 41.6 60.8-41.6V672z" p-id="8633" fill="#000000"></path>
					</svg>
					<svg t="1689251650055" @click="ToggleStatus" v-if="play_status===1" class="icon"
						viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10068" width="32"
						height="32">
						<path
							d="M861.742545 520.005818c13.963636 0 25.460364 10.146909 27.648 23.458909l0.372364 4.514909v77.730909a183.435636 183.435636 0 0 1-174.033454 183.20291l-9.448728 0.279272H229.981091l90.437818 90.437818a28.439273 28.439273 0 0 1 3.258182 36.305455l-3.258182 3.909818a28.439273 28.439273 0 0 1-36.305454 3.258182l-3.909819-3.258182-136.192-136.192a33.978182 33.978182 0 0 1-3.490909-44.218182l3.490909-4.049454 133.911273-133.911273a28.439273 28.439273 0 0 1 43.52 36.305455l-3.258182 3.909818-87.412363 87.365818-4.049455 4.142545h479.557818a127.441455 127.441455 0 0 0 127.255273-119.714909l0.232727-7.773091v-77.730909c0-15.453091 12.520727-27.973818 27.973818-27.973818z m-122.135272-438.923636l3.956363 3.258182L879.709091 220.532364a33.978182 33.978182 0 0 1 8.192 13.079272l0.651636 2.187637c2.606545 9.774545 0.791273 20.48-5.399272 28.951272l-3.444364 4.049455-133.911273 133.911273a28.439273 28.439273 0 0 1-43.52-36.305455l3.258182-3.909818 87.412364-87.365818 4.049454-4.189091-479.604363 0.046545a127.441455 127.441455 0 0 0-127.208728 119.714909l-0.232727 7.726546v77.730909a28.020364 28.020364 0 0 1-55.621818 4.561455l-0.372364-4.561455V398.429091a183.435636 183.435636 0 0 1 173.986909-183.202909l9.448728-0.232727h476.346181L703.301818 124.555636a28.439273 28.439273 0 0 1-3.304727-36.305454l3.258182-3.909818a28.439273 28.439273 0 0 1 36.305454-3.258182z"
							fill="#000000" p-id="10069"></path>
					</svg>
					<svg t="1689251686634" @click="ToggleStatus" v-if="play_status===2" class="icon"
						viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10586" width="32"
						height="32">
						<path
							d="M844.8 665.6c-6.4-6.4-16-12.8-25.6-9.6-19.2 0-35.2 16-35.2 35.2 0 9.6 6.4 19.2 12.8 25.6l41.6 41.6c-44.8-6.4-86.4-22.4-121.6-51.2-3.2 0-3.2-3.2-6.4-6.4L332.8 304C268.8 233.6 192 195.2 99.2 195.2c-19.2 0-35.2 16-35.2 35.2s16 32 35.2 32c73.6 0 134.4 32 182.4 86.4l384 400 6.4 6.4c48 38.4 108.8 64 172.8 70.4l-48 44.8c-9.6 6.4-16 19.2-16 28.8 0 19.2 19.2 35.2 38.4 32 9.6 0 19.2-6.4 25.6-12.8l99.2-92.8c16-16 16-41.6 0-57.6l-99.2-102.4z m-3.2-556.8c-12.8-16-32-19.2-48-6.4-9.6 6.4-12.8 16-12.8 25.6 0 12.8 3.2 22.4 16 28.8l41.6 41.6c-73.6 9.6-140.8 38.4-192 89.6l-115.2 118.4c-12.8 12.8-12.8 32 0 44.8 6.4 6.4 16 9.6 25.6 9.6s19.2-3.2 25.6-9.6l112-118.4c41.6-38.4 92.8-64 147.2-70.4l-44.8 44.8c-6.4 6.4-12.8 16-12.8 25.6 0 19.2 16 35.2 32 35.2 9.6 0 19.2-3.2 28.8-9.6L950.4 256c12.8-12.8 12.8-35.2 0-48l-108.8-99.2m-438.4 448c-9.6 0-19.2 3.2-25.6 9.6l-118.4 121.6c-48 44.8-96 67.2-160 67.2H96c-19.2 0-35.2 16-35.2 35.2s16 32 35.2 32h3.2c83.2 0 147.2-32 211.2-86.4l121.6-124.8c6.4-6.4 9.6-12.8 9.6-22.4 0-9.6-3.2-16-9.6-22.4-9.6-6.4-19.2-9.6-28.8-9.6z"
							p-id="10587" fill="#000000"></path>
					</svg>
					<svg t="1689251718513" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="11988" width="32" height="32">
						<path
							d="M896 304.7v414.6L618.41 512 896 304.7m37.67-101.62c-5.09 0-10.31 1.51-15.04 4.85L536.92 492.98c-12.71 9.49-12.71 28.54 0 38.03l381.72 285.06c4.73 3.34 9.95 4.85 15.04 4.85 13.62 0 26.33-10.8 26.33-26.28V229.36c-0.01-15.48-12.72-26.28-26.34-26.28zM432.62 304.7v414.6L155.03 512l277.59-207.3m37.67-101.62c-5.09 0-10.31 1.51-15.04 4.85L73.53 492.98c-12.71 9.49-12.71 28.54 0 38.03l381.72 285.06c4.73 3.34 9.95 4.85 15.04 4.85 13.62 0 26.33-10.8 26.33-26.28V229.36c0-15.48-12.71-26.28-26.33-26.28z"
							fill="#000000" p-id="11989"></path>
					</svg>
					<image class="playicon" @click="playAndstop" v-if="play" src="../../static/image/icon/stop.png">
					</image>
					<image class="playicon" @click="playAndstop" v-else src="../../static/image/icon/play.png"></image>
					<svg t="1689251876030" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="12897" width="32" height="32">
						<path
							d="M128 304.7L405.59 512 128 719.3V304.7M90.33 203.08c-13.62 0-26.33 10.8-26.33 26.28v565.28c0 15.48 12.71 26.28 26.33 26.28 5.09 0 10.31-1.51 15.04-4.85l381.72-285.06c12.71-9.49 12.71-28.54 0-38.03L105.37 207.92c-4.73-3.33-9.95-4.84-15.04-4.84zM591.38 304.7L868.97 512 591.38 719.3V304.7m-37.67-101.62c-13.62 0-26.33 10.8-26.33 26.28v565.28c0 15.48 12.71 26.28 26.33 26.28 5.09 0 10.31-1.51 15.04-4.85l381.72-285.06c12.71-9.49 12.71-28.54 0-38.03L568.75 207.92c-4.73-3.33-9.95-4.84-15.04-4.84z"
							fill="#000000" p-id="12898"></path>
					</svg>
					<svg t="1689251931032" @click="UnfoldAndwithdraw" v-if="sidebarStatus" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="15764" width="32" height="32">
						<path
							d="M876 840c19.882 0 36 16.118 36 36s-16.118 36-36 36H148c-19.882 0-36-16.118-36-36s16.118-36 36-36h728z m0-243c19.882 0 36 16.118 36 36s-16.118 36-36 36H440c-19.882 0-36-16.118-36-36s16.118-36 36-36h436zM320.752 363.41a8 8 0 0 1 8 8v281.18a8 8 0 0 1-12.603 6.544l-199.848-140.59a8 8 0 0 1 0-13.087l199.848-140.59a8 8 0 0 1 4.603-1.458zM876 355c19.882 0 36 16.118 36 36s-16.118 36-36 36H440c-19.882 0-36-16.118-36-36s16.118-36 36-36h436z m0-243c19.882 0 36 16.118 36 36s-16.118 36-36 36H148c-19.882 0-36-16.118-36-36s16.118-36 36-36h728z"
							fill="#000000" p-id="15765"></path>
					</svg>
					<svg t="1689254588669" @click="UnfoldAndwithdraw" v-else class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="20495" width="32" height="32">
						<path
							d="M868.352 178.176H155.648c-11.605333 0-20.48-8.874667-20.48-20.48s8.874667-20.48 20.48-20.48h712.704c11.605333 0 20.48 8.874667 20.48 20.48s-8.874667 20.48-20.48 20.48zM868.352 414.378667H512c-11.605333 0-20.48-8.874667-20.48-20.48s8.874667-20.48 20.48-20.48h356.352c11.605333 0 20.48 8.874667 20.48 20.48s-8.874667 20.48-20.48 20.48zM868.352 650.581333H512c-11.605333 0-20.48-8.874667-20.48-20.48s8.874667-20.48 20.48-20.48h356.352c11.605333 0 20.48 8.874667 20.48 20.48s-8.874667 20.48-20.48 20.48zM868.352 886.784H155.648c-11.605333 0-20.48-8.874667-20.48-20.48s8.874667-20.48 20.48-20.48h712.704c11.605333 0 20.48 8.874667 20.48 20.48s-8.874667 20.48-20.48 20.48zM360.448 512l-102.4-59.392-102.4-58.709333v236.202666l102.4-58.709333z"
							fill="#000000" p-id="20496"></path>
					</svg>
				</view>
			</view>
		</view>

	</view>
</template>

<script>
	let _this = null
	import request from '../../request/index.js'
	export default {
		data() {
			return {
				id: '',
				musicInfo: {},
				musiclyric: [],
				authors: '',
				musicUrl: '',
				picWidth: 0,
				play: false,
				play_status: 0,			//0：单曲循环     1：循环     2：随机
				sidebarStatus:true			//true:展开         false：收回
			}
		},
		onLoad(options) {
			_this = this;
			_this.id = options.id
			_this.getMusicUrl()
			//根据设备屏幕获取中心图片宽高
			uni.getSystemInfo({
				success: function(res) {
					_this.picWidth = res.windowWidth;
				}
			});
			_this.getlyric()
		},
		methods: {
			getlyric: async () => {
				await request(`/lyric`, {
						id: _this.id
					})
					.then(res => {
						_this.musicInfo = res.data.info
						_this.musiclyric = res.data.lrc
						_this.authors = res.data.lrc[0].lineLyric.split('-')
					})
					.catch(err => {
						console.log(err);
					})
			},
			getMusicUrl: async () => {
				await request('/detail', {
						id: _this.id
					})
					.then(res => {
						_this.musicUrl = res
						console.log(typeof _this.musicUrl)
						console.log(_this.musicUrl)
					})
					.catch(err => {
						console.log(err);
					})
			},
			//播放和暂停
			playAndstop() {
				_this.play = !_this.play
			},
			//切换歌单播放顺序
			ToggleStatus() {
				if (_this.play_status == 2) {
					_this.play_status = 0
				} else {
					_this.play_status++
				}
			},
			//侧边栏展开和收回
			UnfoldAndwithdraw(){
				_this.sidebarStatus = !_this.sidebarStatus
			}
		}
	}
</script>

<style lang="scss" scoped>
	.container {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
	}

	.play_header {
		margin: 70rpx 0 100rpx 0;
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;

		.m_name {
			font-size: 40rpx;
			font-weight: bold;
		}

		.a_name {
			margin-top: 10rpx;
			font-size: 30rpx;
		}
	}

	.play_footer {

		border: 1rpx solid;

		.Collect {
			display: flex;
			flex-direction: row;
			border: 1rpx solid $my-border-color;
			justify-content: space-around;
			width: calc(100vw - 200rpx);

			image {
				width: 50rpx;
				height: 50rpx;
			}
		}

		.playBox {
			.Progress_bar {
				height: 100rpx;
			}

			.play_status {
				.playicon {
					width: 60rpx;
					height: 60rpx;
				}
			}
		}
	}
</style>
